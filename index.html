import { useState } from "react";

const DRY = [
  { id: "farine", ar: "Ø§Ù„Ø¯Ù‚ÙŠÙ‚", fr: "Farine", cup: 110 },
  { id: "semolina", ar: "Ø§Ù„Ø³Ù…ÙŠØ¯ Ø§Ù„Ù†Ø§Ø¹Ù…", fr: "Semoule fine", cup: 130 },
  { id: "sugarFine", ar: "Ø§Ù„Ø³ÙƒØ± Ø§Ù„Ù†Ø§Ø¹Ù…", fr: "Sucre glace", cup: 125 },
  { id: "sugarRough", ar: "Ø§Ù„Ø³ÙƒØ± Ø³Ù†ÙŠØ¯Ø©", fr: "Sucre semoule", cup: 150 },
  { id: "almond", ar: "Ø§Ù„Ù„ÙˆØ²", fr: "Amandes", cup: 110 },
  { id: "sesame", ar: "Ø§Ù„Ø²Ù†Ø¬Ù„Ø§Ù†", fr: "SÃ©same", cup: 110 },
  { id: "coconut", ar: "Ø¬ÙˆØ² Ø§Ù„Ù‡Ù†Ø¯", fr: "Noix de coco", cup: 60 },
  { id: "cocoa", ar: "Ø§Ù„ÙƒØ§ÙƒØ§Ùˆ", fr: "Cacao", cup: 100 },
  { id: "butter", ar: "Ø§Ù„Ø²Ø¨Ø¯Ø©", fr: "Beurre", cup: 225 }
];

const LIQUID = [
  { id: "water", ar: "Ø§Ù„Ù…Ø§Ø¡", fr: "Eau", cup: 170 },
  { id: "milk", ar: "Ø§Ù„Ø­Ù„ÙŠØ¨", fr: "Lait", cup: 170 },
  { id: "oil", ar: "Ø§Ù„Ø²ÙŠØª", fr: "Huile", cup: 170 }
];

function formatCups(value) {
  const cups = Math.floor(value);
  const rest = value - cups;

  let text = "";
  if (cups > 0) text += `${cups} ÙƒØ£Ø³`;

  if (rest >= 0.75) text += " + 3/4";
  else if (rest >= 0.5) text += " + Ù†ØµÙ";
  else if (rest >= 0.25) text += " + Ø±Ø¨Ø¹";

  return text || "â‰ˆ Ù…Ø¹Ù„Ù‚Ø© ØµØºÙŠØ±Ø©";
}

export default function App() {
  const [type, setType] = useState("dry");
  const [ingredient, setIngredient] = useState(DRY[0]);
  const [value, setValue] = useState("");

  const list = type === "dry" ? DRY : LIQUID;

  const result = () => {
    if (!value) return "";
    const cups = value / ingredient.cup;
    return formatCups(cups);
  };

  return (
    <div style={{
      minHeight: "100vh",
      background: "#fdfbf7",
      color: "#5D4037",
      padding: "20px",
      fontFamily: "sans-serif"
    }}>
      <h1 style={{ textAlign: "center" }}>ğŸ¥„ Ø´Ø­Ø§Ù„ Ù†Ø¯ÙŠØ±ØŸ ğŸ‡²ğŸ‡¦</h1>
      <p style={{ textAlign: "center", opacity: 0.8 }}>
        Calculateur marocain Ø¨Ø§Ù„ÙƒØ£Ø³ ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ù‚
      </p>

      <div style={{ maxWidth: 400, margin: "auto" }}>
        <select
          onChange={(e) => {
            setType(e.target.value);
            setIngredient(e.target.value === "dry" ? DRY[0] : LIQUID[0]);
          }}
          style={{ width: "100%", padding: 10, marginBottom: 10 }}
        >
          <option value="dry">Ù†ÙˆØ§Ø´Ù / Solides</option>
          <option value="liquid">Ø³ÙˆØ§Ø¦Ù„ / Liquides</option>
        </select>

        <select
          onChange={(e) =>
            setIngredient(list.find(i => i.id === e.target.value))
          }
          style={{ width: "100%", padding: 10, marginBottom: 10 }}
        >
          {list.map(i => (
            <option key={i.id} value={i.id}>
              {i.ar} â€“ {i.fr}
            </option>
          ))}
        </select>

        <input
          type="number"
          placeholder={type === "dry" ? "Ø§Ù„ÙˆØ²Ù† Ø¨Ø§Ù„ØºØ±Ø§Ù…" : "Ø§Ù„ÙƒÙ…ÙŠØ© Ø¨Ø§Ù„Ù…Ù„"}
          value={value}
          onChange={(e) => setValue(e.target.value)}
          style={{ width: "100%", padding: 12, fontSize: 18 }}
        />

        {value && (
          <div style={{
            background: "#fff",
            marginTop: 20,
            padding: 15,
            borderRadius: 10,
            textAlign: "center"
          }}>
            <strong>Ø§Ù„Ù†ØªÙŠØ¬Ø©:</strong>
            <p style={{ fontSize: 20, marginTop: 10 }}>{result()}</p>
            <small>Ø¨ØµÙ‘Ø­Ø© ÙˆØ±Ø§Ø­Ø© ğŸ‘Œ</small>
          </div>
        )}
      </div>
    </div>
  );
}
